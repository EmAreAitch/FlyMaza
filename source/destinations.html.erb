<% destinations = data.travel.destinations %>
<% categories = { domestic: "Domestic Destinations", international: "International Destinations" } %>

<!-- Tab Navigation -->
<section class="py-12 pt-32">
  <div class="container-custom text-center mb-8">    
    <h1 class="heading-section text-gray-900 mb-3">Discover Our Destinations</h1>
    <p class="text-gray-600 max-w-2xl mx-auto mb-4">
      Explore a curated list of destinations with unique experiences and rich culture.
    </p>

    <div class="flex justify-center">
      <div class="flex space-x-2 bg-gray-100 rounded-lg p-1">
        <% categories.each_with_index do |(key, label), index| %>
          <button 
            class="tab-button px-6 py-2 text-sm font-semibold rounded-md transition-all duration-200 focus:outline-none cursor-pointer <%= index.zero? ? 'bg-primary-600 text-white' : 'bg-transparent text-gray-600' %>" 
            data-tab="<%= key %>"
            onclick="showTab('<%= key %>', this)"
          >
            <%= label %>
          </button>
        <% end %>
      </div>
    </div>
  </div>
</section>

<!-- Destinations Grid (Domestic + International) -->
<% categories.each do |key, label| %>
  <div id="<%= key %>-content" class="tab-content <%= 'hidden' unless key == :domestic %>">
    <section class="py-16 <%= key == :domestic ? 'bg-gray-50' : 'bg-gray-50' %>">
      <div class="container-custom px-4">
        <%= partial "destinations", locals: { destinations: destinations[key] } %>
      </div>
    </section>
  </div>
<% end %>

<!-- Featured Packages -->
<section class="py-16 bg-white">
  <div class="container-custom px-4">
    <div class="mb-8 text-left">
      <p class="text-gray-400 text-sm font-medium mb-2 uppercase tracking-wide">Highlights</p>
      <h2 class="text-4xl md:text-5xl font-bold text-gray-900">Featured Travel Packages</h2>
    </div>

    <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
      <% destinations.values.flatten.each do |dest| %>
        <% dest.packages.each do |package| %>
          <%= partial "package", locals: {package:} %>
        <% end %>
      <% end %>
    </div>
  </div>
</section>

<!-- CTA -->
<section class="py-24 bg-primary-600">
  <div class="container-custom px-4 text-center">
    <div class="inline-block bg-white/10 backdrop-blur-sm rounded-2xl p-12 shadow-card">
      <h2 class="heading-section text-white mb-4">Ready for Your Next Adventure?</h2>
      <p class="text-white/80 mb-8">Browse our packages and book the perfect travel experience for you.</p>
      <a href="/packages" class="btn-secondary">Explore Packages</a>
    </div>
  </div>
</section>

<script>
  function showTab(tabName, clickedButton) {
    document.querySelectorAll('.tab-content').forEach(c => c.classList.add('hidden'));
    document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('bg-primary-600','text-white') || b.classList.add('bg-transparent','text-gray-600'));
    document.getElementById(tabName+'-content').classList.remove('hidden');
    clickedButton.classList.remove('bg-transparent','text-gray-600');
    clickedButton.classList.add('bg-primary-600','text-white');
  }
</script>
